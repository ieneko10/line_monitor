# Flask Webアプリケーション サンプル (ex3_flask)

シンプルなFlask Webアプリケーションのサンプルコードです。テンプレート継承、エラーハンドリング、RESTful APIの基本的な実装を含んでいます。

## 機能

- **ホームページ**: アプリケーションの基本情報を表示
- **テストページ**: ルーティングとテンプレート表示のテスト
- **チェックアウトページ**: 決済処理の模擬実装
- **決済結果ページ**: 成功・キャンセル時の結果表示
- **API エンドポイント**: JSON形式でアプリケーション状態を返す
- **エラーハンドリング**: 404/500エラーの適切な処理

## ディレクトリ構成

```
ex3_flask/
├── server.py              # アプリケーション起動スクリプト
├── app/                   # アプリケーションパッケージ
│   ├── __init__.py       # Flaskアプリケーションファクトリ
│   ├── config.py         # 設定ファイル
│   ├── views.py          # ルーティングとビュー関数
│   └── templates/        # HTMLテンプレート
│       ├── base.html     # ベーステンプレート
│       ├── index.html    # ホームページ
│       ├── test.html     # テストページ
│       ├── checkout.html # チェックアウトページ
│       ├── success.html  # 決済成功ページ
│       ├── cancel.html   # 決済キャンセルページ
│       └── error.html    # エラーページ
└── README.md             # このファイル
```

## 実行方法

### 基本的な起動
```bash
cd examples/src/ex3_flask
python server.py
```

### 環境変数を使用した設定
```bash
# カスタムホストとポートで起動
set FLASK_HOST=0.0.0.0
set FLASK_PORT=8080
set FLASK_DEBUG=True
python server.py
```

### アクセスURL
- ホームページ: http://127.0.0.1:5000/
- テストページ: http://127.0.0.1:5000/test
- チェックアウト: http://127.0.0.1:5000/checkout
- API Status: http://127.0.0.1:5000/api/status

## アーキテクチャ解説

### Application Factory Pattern
- `app/__init__.py`でアプリケーションファクトリパターンを採用
- 設定の分離とテスタビリティの向上を実現

### テンプレート継承
- `base.html`をベーステンプレートとして使用
- 一貫したデザインとナビゲーションを提供
- レスポンシブデザインに対応

### エラーハンドリング
- 404と500エラーをカスタムページで処理
- ユーザーフレンドリーなエラー表示

### RESTful API
- `/api/status`エンドポイントでJSON形式のレスポンス
- アプリケーションの健全性チェックに使用可能

## 技術スタック

- **Flask**: Python Webフレームワーク
- **Jinja2**: テンプレートエンジン
- **HTML/CSS**: フロントエンド
- **JSON**: API レスポンス形式

## 設定

`app/config.py`で以下の設定が可能：
- `DEBUG`: デバッグモードの有効/無効
- `SECRET_KEY`: セッション管理用のシークレットキー
- `DATABASE_URL`: データベース接続URL（将来的な拡張用）

## 拡張可能性

このサンプルは以下の拡張に対応できます：
- データベース統合 (SQLAlchemy)
- ユーザー認証システム
- フォーム処理 (Flask-WTF)
- 決済システム統合 (Stripe等)
- API機能の拡張
- セッション管理

## 注意事項

- 本番環境では`SECRET_KEY`を適切に設定してください
- DEBUGモードは開発時のみ有効にしてください
- 実際の決済処理を実装する場合は、適切なセキュリティ対策を講じてください
